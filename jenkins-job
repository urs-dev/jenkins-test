#!/usr/bin/env groovy

def myVar = "Hallo Otto"
                def disk_size = sh(script: "df / --output=avail | tail -1", returnStdout: true).trim() as Integer

pipeline {
    agent any
    options {
        skipDefaultCheckout true
    }
    stages {
        stage("Stage-1") {
            steps {
                echo "--- STAGE 1 -----------------------------------------------------"
                //sh "echo ${myVar}"  // Variable innerhalb von string
                echo myVar
                // echo HOSTNAME
                echo "STAGE: first, STEP-1"
                bat 'wmic computersystem get name'
                    
                bat 'echo %PATH%'
                echo env.PATH
                echo "--- calling powershell script ---"
                // PowerShell(". '.\\job-1.ps1'") 
            }
        }
        stage("Stage-2") {
            steps{
                echo "--- STAGE 2 -----------------------------------------------------"
                println("disk_size = ${disk_size}")

            }
		}
	}		
}
